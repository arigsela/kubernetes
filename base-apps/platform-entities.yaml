  apiVersion: argoproj.io/v1alpha1
  kind: Application
  metadata:
    name: platform-entities
    namespace: argo-cd
    labels:
      app.kubernetes.io/name: platform-entities
      app.kubernetes.io/instance: platform-entities-argocd
      app.kubernetes.io/component: gitops
      app.kubernetes.io/part-of: platform-entities
    annotations:
      argocd.argoproj.io/sync-wave: "50"
  spec:
    project: default
    source:
      repoURL: https://github.com/arigsela/kubernetes
      targetRevision: main
      path: base-apps/platform-entities
    destination:
      server: https://kubernetes.default.svc
      namespace: default
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
        allowEmpty: false
      syncOptions:
        - CreateNamespace=true
        - PrunePropagationPolicy=foreground
        - PruneLast=true
      retry:
        limit: 5
        backoff:
          duration: 5s
          factor: 2
          maxDuration: 3m
    revisionHistoryLimit: 10