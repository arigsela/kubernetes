apiVersion: mysql.sql.crossplane.io/v1alpha1
kind: User
metadata:
  name: chores-user
  namespace: chores-tracker
spec:
  providerConfigRef:
    name: mysql-provider
  forProvider:
    passwordSecretRef:
      name: chores-tracker-secrets
      key: DB_PASSWORD
      namespace: chores-tracker
    # Add explicit host access
    host: "%"
---
apiVersion: mysql.sql.crossplane.io/v1alpha1
kind: Database
metadata:
  name: chores-db
  namespace: chores-tracker
spec:
  providerConfigRef:
    name: mysql-provider
  forProvider:
    # Add explicit database name
    name: chores_db
    # Add character set and collation
    charset: utf8mb4
    collation: utf8mb4_unicode_ci
---
apiVersion: mysql.sql.crossplane.io/v1alpha1
kind: Grant
metadata:
  name: chores-db-grant
  namespace: chores-tracker
spec:
  providerConfigRef:
    name: mysql-provider
  forProvider:
    user: chores-user
    host: "%"  # Match the user's host
    privileges:
      - ALL
    database: chores_db  # Match the database name
